void calc() {

	f1 = getinput(0);
	f2 = getinput(1);
	f3 = getinput(2);
	f4 = getinput(3);

	f5 = 0.622 * f2 / 100 * (1.01325 * pow(10, (5.426651 - 2005.1 / (f1 +
	    273.15) + 0.00013869 * ((f1 + 273.15) * (f1 + 273.15) - 293700) /
	    (f1 + 273.15) * (pow(10, (0.000000000011965 * ((f1 + 273.15) *
	    (f1 + 273.15) - 293700) * ((f1 + 273.15) * (f1 + 273.15) - 
	    293700))) - 1) - 0.0044 * pow(10, ((-0.0057148 * pow((374.11 - f1),
	    1.25)))))) + (((f1 + 273.15) / 647.3) - 0.422) * (0.577 - ((f1 +
	    273.15) / 647.3)) * exp(0.000000000011965 * ((f1 + 273.15) * (f1 +
	    273.15) - 293700) * ((f1 + 273.15) * (f1 + 273.15) - 293700)) *
	    0.00980665) / (f3 / 1000 - f2 / 100 * (1.01325 * pow(10, (5.426651 -
	    2005.1 / (f1 + 273.15) + 0.00013869 * ((f1 + 273.15) * (f1 +
	    273.15) - 293700) / (f1 + 273.15) * (pow(10, (0.000000000011965 *
	    ((f1 + 273.15) * (f1 + 273.15) - 293700) * ((f1 + 273.15) * (f1 +
	    273.15) - 293700))) - 1) - 0.0044 * pow(10, ((-0.0057148 *
	    pow((374.11 - f1), 1.25)))))) + (((f1 + 273.15) / 647.3) - 0.422) *
	    (0.577 - ((f1 + 273.15) / 647.3)) * exp(0.000000000011965 * ((f1 +
	    273.15) * (f1 + 273.15) - 293700) * ((f1 + 273.15) *
	    (f1 + 273.15) - 293700)) * 0.00980665)) * f3 / 1000 * 100000000 /
	    ((f1 + 273.15) * 287.1);

	if (f1 < 0)
		f6 = 272.62 * ((22.46 * f1) / (272.62 + f1) + log(f2 / 100)) /
		    ((22.46 * 272.62) / (272.62 + f1) - log(f2 / 100));
	else
		f6 = 243.12 * ((17.62 * f1) / (243.12 + f1) + log(f2 / 100)) /
		    ((17.62 * 243.12) / (243.12 + f1) - log(f2 / 100));
	

	f7 = f5 - f4;

	setoutput(0, f5);
	setoutput(1, f6);
	setoutput(2, f7);
}

// inputs
float f1;	// lufttemperatur
float f2;	// relative luftfeuchtigkeit
float f3;	// luftdruck
float f4;	// absolute luftfeuchtigkeit aussen

// outputs
float f5;	// absolute luftfeuchtigkeit
float f6;	// taupunkt
float f7;	// lueften

int nEvents;

while(TRUE) {

	nEvents = getinputevent();

	if (nEvents & 0x78)
		calc();

	sleep(60000);
}
